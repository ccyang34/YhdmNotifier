name: 定时运行市场宽度快速报告

on:
  schedule:
    - cron: '30 7 * * 1-5'  # 北京时间15:30
  workflow_dispatch:

jobs:
  run_report:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      - name: 检出代码（必须步骤，拉取仓库文件）
        uses: actions/checkout@v4  # 确保这一步存在，否则找不到脚本

      - name: 设置Python环境（不启用pip缓存）
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'  # 移除cache: 'pip'，避免寻找依赖文件

      - name: 直接安装依赖
        run: |
          python -m pip install --upgrade pip
          pip install requests pandas  # 手动安装所需库

      - name: 执行脚本
        run: python "市场宽度快速报告.py"  # 确保脚本名与仓库中一致
